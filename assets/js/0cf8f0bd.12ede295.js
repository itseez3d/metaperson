"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9758],{81:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting07-f3d583c75dbe5e191c9ef4ee0b5f6467.png"},349:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting03_1-739d75f9f245a5ad8123412961f91b4a.png"},546:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting13-f338ccb03ba5d67e10c0d68f59add31c.png"},1051:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting12-a0970d1ed469b268b984aaf736d28f70.png"},2216:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting06-f78cd4f18dd3caf1e193635ae451d612.png"},2269:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting14-6cd041d6193c174575edfdcc7b984e59.png"},3481:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting10-f5f6022567b64110d8d2bb97056ef00c.png"},4479:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting09-5ef9be9bb6f7f66838ad8eebbff1c3b4.png"},6421:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting03-06f0e7d7e8ae0e16b1e45ef8f4bbd4f0.png"},7232:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting11-073241394196ad29f1577868b454d6cc.png"},7324:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting02-efdc52e37bc44a0b69121dfb6b3d2940.png"},7383:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting01-681803d456c4e9364d74171ea5fce528.png"},7491:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting05-3c15cfe51c21781de916f89127800339.png"},8150:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting08-6bb49bf384f0b758c3bc3bdac2d021aa.png"},8246:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"business-integration/ue/animation_retargeting","title":"Animation Retargeting","description":"Retargeting animation from Epic\'s Mannequin skeleton to Metaperson.","source":"@site/docs/business-integration/ue/animation_retargeting.md","sourceDirName":"business-integration/ue","slug":"/business-integration/ue/animation_retargeting","permalink":"/business-integration/ue/animation_retargeting","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_label":"Animation retargeting","description":"Retargeting animation from Epic\'s Mannequin skeleton to Metaperson.","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Unreal Engine Marketplace Plugin","permalink":"/business-integration/ue/marketplace_plugin"},"next":{"title":"MetaPerson Creator integration","permalink":"/business-integration/ue/metaperson_creator_integration"}}');var a=n(4848),s=n(8453);const r={sidebar_label:"Animation retargeting",description:"Retargeting animation from Epic's Mannequin skeleton to Metaperson.",sidebar_position:5},o="Animation Retargeting",g={},c=[];function d(e){const t={a:"a",em:"em",h1:"h1",header:"header",img:"img",p:"p",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"animation-retargeting",children:"Animation Retargeting"})}),"\n",(0,a.jsxs)(t.p,{children:["MetaPerson was originally designed using a Mixamo-compatible skeleton so that Mixamo animations can be easily used with avatars. At the same time, UE5 provides ",(0,a.jsx)(t.a,{href:"https://docs.unrealengine.com/5.0/en-US/ik-rig-animation-retargeting-in-unreal-engine/",children:"tools"})," that can be used to retarget an animation from an Epic skeleton to any other. We will not repeat the official documentation here but will focus on the assets provided with the demo project that can help retarget animations."]}),"\n",(0,a.jsxs)(t.p,{children:["As mentioned in the documentation, retargeting with IK Rig is achieved by specifying a source and target Skeletal Mesh, which are defined by an IK Rig Asset for each of those meshes. So to retarget animations one needs: Source IKRig for Epic skeleton, Target IKRig for MetaPerson, IK Retargeter asset. Demo project contains all of the mentioned assets: ",(0,a.jsx)(t.em,{children:"/Game/MannequinToMetaperson2/IK_Retargeting/IK_Manny"}),", ",(0,a.jsx)(t.em,{children:"/AvatarSDKMetaperson2/Skeleton/Metaperson2_IK_Rig"}),", ",(0,a.jsx)(t.em,{children:"/Game/MannequinToMetaperson2/IK_Retargeting/IK_Retargeter_Metaperson2"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"Both IK Rigs contain definitions for Retarget Chains:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Metapeson leg retarget chain",src:n(7383).A+"",width:"1451",height:"597"})}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Mannequin leg retarget chain",src:n(7324).A+"",width:"1450",height:"570"})}),"\n",(0,a.jsx)(t.p,{children:"MetaPerson IK Rig contains IK goals for leg bones to reduce the unwanted artifacts where the leg meets the floor surface:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"MetaPerson IK goals",src:n(6421).A+"",width:"1888",height:"455"})}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.a,{href:"https://docs.unrealengine.com/5.0/en-US/ik-rig-in-unreal-engine/",children:"More IK goals can be added"})," to IK Rig depending on your project  requirements."]}),"\n",(0,a.jsxs)(t.p,{children:["Retargeter Asset (",(0,a.jsx)(t.em,{children:"/Game/MannequinToMetaperson2/IK_Retargeting/IK_Retargeter_Metaperson2"}),"), according to documentation, is an asset and editor that references both source and target rigs, providing you with functionality to customize the retargeting results."]}),"\n",(0,a.jsx)(t.p,{children:"Retarget chains are mapped in Retargeter Asset based on their names. We similarly named chains for source and target IK Rigs, so automapping works fine."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Auto mapped chains",src:n(349).A+"",width:"666",height:"470"})}),"\n",(0,a.jsx)(t.p,{children:"For best results with animation retargeting, the pose of the target skeletal mesh should be aligned with the source mesh."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Aligned skeletal meshes",src:n(9914).A+"",width:"744",height:"967"})}),"\n",(0,a.jsx)(t.p,{children:"Playing a preview animation can help visualize the retargeting result."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Playing animation",src:n(7491).A+"",width:"914",height:"622"})}),"\n",(0,a.jsxs)(t.p,{children:["Having Retargeter Asset, one can simply retarget existing animations or animation blueprints. Our demo is based on well-known ",(0,a.jsx)(t.a,{href:"https://docs.unrealengine.com/5.0/en-US/third-person-template-in-unreal-engine/",children:"Epic's Third Person Template"}),", so we can retarget the animation blueprint provided with it."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Animation BP",src:n(2216).A+"",width:"566",height:"349"})}),"\n",(0,a.jsx)(t.p,{children:'Right-click on the asset opens a context menu where you can find the "Duplicate and Retarget Animation Blueprint" command.'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Retarget menu",src:n(81).A+"",width:"1056",height:"470"})}),"\n",(0,a.jsx)(t.p,{children:'In the "Duplicate and Retarget Animation Blueprint" window you need to set the IK Retageter parameter:'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Duplicate and Retarget Animation Blueprint",src:n(8150).A+"",width:"1443",height:"726"})}),"\n",(0,a.jsx)(t.p,{children:"You also may find it useful to set the naming parameters and destination folder:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Duplicate and Retarget Animation Blueprint",src:n(4479).A+"",width:"1122",height:"464"})}),"\n",(0,a.jsx)(t.p,{children:'Press the "Retarget" button and explore the results:'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Animation Retarget Result",src:n(3481).A+"",width:"1019",height:"284"})}),"\n",(0,a.jsx)(t.p,{children:'One more thing is required to achieve the best result: open the resulting blueprint and remove the "control rig" element from the animation graph.'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Control Rig",src:n(546).A+"",width:"1266",height:"778"})}),"\n",(0,a.jsx)(t.p,{children:"Now you can save the results and use the retargeted blueprint as an animation class for the character."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Character",src:n(7232).A+"",width:"933",height:"495"})}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Animation Class",src:n(1051).A+"",width:"734",height:"914"})}),"\n",(0,a.jsx)(t.p,{children:"Your animations were successfully retargeted:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Result",src:n(2269).A+"",width:"1349",height:"489"})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var i=n(6540);const a={},s=i.createContext(a);function r(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(s.Provider,{value:t},e.children)}},9914:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/retargeting04-37f5f7d691dbd40325afd55e6231c7f4.png"}}]);